var CloudCommander;(function(){"use strict";var e=CloudCommander,t;e.KEY={TAB:9,ENTER:13,ESC:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,UP:38,DOWN:40,Delete:46,D:68,O:79,Q:81,R:82,S:83,T:84,F2:113,F3:114,F4:115,F10:121,TRA:192};var n=e.KEY;e.KeyBinding={};var r=e.KeyBinding;r.get=function(){return t},r.set=function(){t=!0},r.unSet=function(){t=!1},r.init=function(){var r=e.Util,i={left:0,right:0},s=function(s){var o=r.getCurrentFile(),u,a;if(t&&s){if(s.keyCode===n.O&&s.altKey)console.log("openning config window..."),r.Images.showLoad(),typeof e.Config=="function"&&e.Config();else if(s.keyCode===n.TAB){console.log("Tab pressed");try{var f=r.getPanel(),l=f.id;i[l]=o,f=r.getPanel({active:!1}),l=f.id;if(i[l])r.setCurrentFile(i[l]);else{var c=r.getByTag("li",f)[2];r.setCurrentFile(c)}}catch(h){console.log(h)}s.preventDefault()}else if(s.keyCode!==n.F2)if(s.keyCode===n.Delete)r.removeCurrent(o);else if(s.keyCode===n.F3){r.Images.showLoad();var p=e.Viewer,d=e.Editor;s.shiftKey&&typeof p=="function"?p(o):typeof d=="function"&&d(!0),s.preventDefault()}else if(s.keyCode===n.F4)r.Images.showLoad(),typeof e.Editor=="function"&&e.Editor(),s.preventDefault();else if(s.keyCode===n.F10&&s.shiftKey)typeof e.Menu=="function"&&e.Menu(),s.preventDefault();else if(s.keyCode===n.TRA)r.Images.showLoad({top:!0}),typeof e.Terminal=="function"&&e.Terminal();else if(s.keyCode===n.UP){if(!o)return;o=o.previousSibling,o&&r.setCurrentFile(o),s.preventDefault()}else if(s.keyCode===n.DOWN){if(!o)return;o=o.nextSibling,o&&(r.setCurrentFile(o),s.preventDefault())}else if(s.keyCode===n.HOME)o=o.parentElement.firstChild,r.setCurrentFile(o),s.preventDefault();else if(s.keyCode===n.END)o=o.parentElement.lastElementChild,r.setCurrentFile(o),s.preventDefault();else if(s.keyCode===n.PAGE_DOWN){r.getPanel().scrollByPages(1);for(a=0;a<30;a++){if(!o.nextSibling)break;o=o.nextSibling}r.setCurrentFile(o),s.preventDefault()}else if(s.keyCode===n.PAGE_UP){r.getPanel().scrollByPages(-1);for(a=0;a<30;a++){if(!o.previousSibling)break;try{o.previousSibling.previousSibling.previousSibling.previousSibling}catch(v){break}o=o.previousSibling}r.setCurrentFile(o),s.preventDefault()}else if(s.keyCode===n.ENTER){if(!o)return;u=r.getByClass("name",o);if(!u)return!1;var m=r.getByTag("a",u[0]);if(!m)return!1;if(o.onclick)o.onclick(!0);else try{m[0].click()}catch(h){console.log(h)}s.preventDefault()}else if(s.keyCode===n.R&&s.ctrlKey){console.log("<ctrl>+r pressed"),console.log("reloading page..."),console.log("press <alt>+q to remove all key-handlers");var g=r.getRefreshButton();if(g){var y=r.getByTag("a",o)[0].textContent;g.onclick(),e._currentToParent(y),s.preventDefault()}}else if(s.keyCode===n.D&&s.ctrlKey){console.log("<ctrl>+d pressed"),console.log("clearing cache..."),console.log("press <alt>+q to remove all key-handlers");var b=r.getById("clear-cache");b&&b.onclick&&b.onclick(),s.preventDefault()}else s.keyCode===n.Q&&s.altKey&&(console.log("<alt>+q pressed"),console.log("<ctrl>+r reload key-handerl - removed"),console.log("<ctrl>+s clear cache key-handler - removed"),console.log("press <alt>+s to to set them"),t=!1,s.preventDefault())}else s.keyCode===n.S&&s.altKey&&(t=!0,console.log("<alt>+s pressed"),console.log("<ctrl>+r reload key-handerl - set"),console.log("<ctrl>+s clear cache key-handler - set"),console.log("press <alt>+q to remove them"),s.preventDefault());return!1};document.addEventListener?document.addEventListener("keydown",s,!1):document.onkeydown=s,t=!0}})()